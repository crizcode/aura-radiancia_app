<div class="w-full max-w-xs h-full fixed right-0 top-0 z-85 flex flex-col bg-[#f2f2f3] transition-transform duration-500 transform translate-x-0 ease-out"
    style="z-index: 9999; animation: 0.5s ease 0s 1 normal none running rightToLeft;">

    <!-- Componente fijo en la parte superior -->
    <div class="fixed top-0 w-full bg-[#f2f2f3] z-50">
        <!-- Componente fijo en la parte superior -->
        <div class="flex items-center justify-between m-2">
            <h3 class="text-2xl font-medium text-gray-700"> Carrito </h3>
            <button (click)="closeCart()" class="text-gray-600 focus:outline-none ml-auto">
                <svg class="h-5 w-5" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    viewBox="0 0 24 24" stroke="currentColor">
                    <path d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>
        <hr class="my-3">
    </div>



    <div class="relative"
        style="padding-top: calc(50px + 1rem); padding-bottom: calc(40px + 1rem); height: calc(100vh - 90px); overflow-y: auto;">

        <!-- Mostrar mensaje si el carrito está vacío -->
        <div *ngIf="isCartEmpty" class="flex flex-col justify-center items-center relative gap-6 py-10">

            <svg fill="#000000" width="100px" height="100px" viewBox="0 0 24 24" id="bag" data-name="Line Color"
                xmlns="http://www.w3.org/2000/svg" class="icon line-color">
                <path id="primary"
                    d="M17.92,21H6.08a1,1,0,0,1-1-1.08l.85-11a1,1,0,0,1,1-.92H17.07a1,1,0,0,1,1,.92l.85,11A1,1,0,0,1,17.92,21Z"
                    style="fill: none; stroke: rgb(0, 0, 0); stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;">
                </path>
                <path id="secondary" d="M9,11V6a3,3,0,0,1,3-3h0a3,3,0,0,1,3,3v5"
                    style="fill: none; stroke: rgb(57, 200, 222); stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;">
                </path>
            </svg>
            <p>El carrito está vacío</p>
        </div>


        <!-- Contenido desplazable -->
        <div class="m-2 " *ngIf="!isCartEmpty">
            <div *ngFor="let item of cartItems" class="m-2 bg-white w-590 pt-[10px] relative">
                <div class="flex gap-3">
                    <div class="flex-grow-0 flex-shrink-0 w-[100px] h-[px] relative bg-[#ebebeb]">
                        <a [routerLink]="['/detail', item.product.id]">
                            <img alt="" src="{{item.product.imagenUrl}}" decoding="async" data-nimg="fill"
                                style="object-fit: contain; max-width: 100%;">
                        </a>
                    </div>
                    <div class="flex flex-col justify-between flex-grow gap-14px">
                        <div class="flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0">
                            <div
                                class="flex w-full justify-between items-center self-stretch flex-grow-0 flex-shrink-0 gap-3">
                                <a target="_blank"
                                    class="flex-grow text-[14px] font-normal leading-[20px] truncate text-left text-[#31353C] max-w-[245px]"
                                    [routerLink]="['/detail', item.product.id]">
                                    {{ item.product.nombre }}
                                </a>

                                <button (click)="eliminarItem(item)" class="p-0">
                                    <svg width="28" height="28" viewBox="0 0 28 28" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <rect width="28" height="28" rx="4" fill="white"></rect>
                                        <path fill-rule="evenodd" clip-rule="evenodd"
                                            d="M10.0417 8.66593C10.0417 7.40028 11.0677 6.37427 12.3333 6.37427H15.6667C16.9323 6.37427 17.9583 7.40028 17.9583 8.66593V9.41626H20.875C21.2202 9.41626 21.5 9.69608 21.5 10.0413C21.5 10.3864 21.2202 10.6663 20.875 10.6663H7.125C6.77982 10.6663 6.5 10.3864 6.5 10.0413C6.5 9.69608 6.77982 9.41626 7.125 9.41626H10.0417V8.66593ZM16.7083 8.66593V9.41626H11.2917V8.66593C11.2917 8.09064 11.758 7.62427 12.3333 7.62427H15.6667C16.242 7.62427 16.7083 8.09064 16.7083 8.66593ZM9.625 11.8324C9.625 11.4873 9.34518 11.2074 9 11.2074C8.65482 11.2074 8.375 11.4873 8.375 11.8324V19.3324C8.375 20.5981 9.40101 21.6241 10.6667 21.6241H17.3333C18.599 21.6241 19.625 20.5981 19.625 19.3324V11.8324C19.625 11.4873 19.3452 11.2074 19 11.2074C18.6548 11.2074 18.375 11.4873 18.375 11.8324V19.3324C18.375 19.9077 17.9086 20.3741 17.3333 20.3741H10.6667C10.0914 20.3741 9.625 19.9077 9.625 19.3324V11.8324ZM12.2917 13.1663C12.6369 13.1663 12.9167 13.4461 12.9167 13.7913V18.3746C12.9167 18.7198 12.6369 18.9996 12.2917 18.9996C11.9465 18.9996 11.6667 18.7198 11.6667 18.3746V13.7913C11.6667 13.4461 11.9465 13.1663 12.2917 13.1663ZM15.0833 13.7913C15.0833 13.4461 15.3631 13.1663 15.7083 13.1663C16.0535 13.1663 16.3333 13.4461 16.3333 13.7913V18.3746C16.3333 18.7198 16.0535 18.9996 15.7083 18.9996C15.3631 18.9996 15.0833 18.7198 15.0833 18.3746V13.7913Z"
                                            fill="#31353C"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="flex items-center">
                            <div class="flex justify-start items-center flex-grow-0 flex-shrink-0 h-7 relative gap-0.5 px-2 py-1 rounded bg-[#f2f2f3] cursor-pointer"
                                title="Black,L">
                                <p
                                    class="flex-grow-0 flex-shrink-0 text-[14px] text-left text-[#484c52] max-w-[118px] truncate">
                                    Black,L</p>
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                    class="flex-grow-0 flex-shrink-0 w-4 h-4 relative"
                                    preserveAspectRatio="xMidYMid meet">
                                    <path d="M4 6L8 10L12 6" stroke="#484C52"></path>
                                </svg>
                            </div>
                        </div>
                        <div
                            class="flex justify-start items-center flex-grow-0 flex-shrink-0 relative gap-2 notranslate">
                            <p
                                class="flex-grow-0 flex-shrink-0 text-base leading-[24px] font-bold text-left text-[#31353C]">
                                S/ {{item.product.precio}}
                            </p>
                            <p
                                class="flex-grow-0 flex-shrink-0 text-[14px] leading-[19px] line-through text-left text-[#a1a5ab]">
                            </p>
                        </div>
                        <div
                            class="flex justify-between items-center flex-grow-0 flex-shrink-0 relative gap-4 notranslate">
                            <div class="flex flex-grow-0 flex-shrink-0 relative rounded-l-[5px] h-[28px]">
                                <button (click)="adjustQuantity(item, 'decrease')"
                                    class="text-gray-500 focus:outline-none focus:text-gray-600">
                                    <svg class="h-5 w-5 text-slate-900" viewBox="0 0 24 24" fill="none"
                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                                        <line x1="8" y1="12" x2="16" y2="12" />
                                    </svg>
                                </button>

                                <span class="text-gray-700 mx-2"> {{item.quantity}} </span>

                                <button (click)="adjustQuantity(item, 'increase')"
                                    class="text-gray-500 focus:outline-none focus:text-gray-600">
                                    <svg class="h-5 w-5 text-slate-900" viewBox="0 0 24 24" fill="none"
                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                                        <line x1="12" y1="8" x2="12" y2="16" />
                                        <line x1="8" y1="12" x2="16" y2="12" />
                                    </svg>
                                </button>

                            </div>
                            <div class="text-[12px] leading-[16px] text-[#31353c]">Total: <span
                                    class="text-[14px] leading-[18px] font-bold">S/{{item.product.precio}} </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <div *ngIf="!isCartEmpty" class="fixed bottom-0 w-full bg-[#f2f2f3] z-50 mb-5">
        <hr class="my-3">

        <div class="flex-1 overflow-hidden flex justify-end gap-1 m-2">
            <span class="flex-grow-0 flex-shrink-0 text-xl text-left text-[#31353c]">
                Total:
            </span>
            <div class="flex justify-start items-center flex-grow-0 flex-shrink-0 relative gap-2">
                <p class="flex-grow-0 flex-shrink-0 text-xl font-bold text-left text-red-600 notranslate">
                    S/ {{ totalPrecio | number:'1.2-2' }}
                </p>
            </div>
        </div>
        <!-- Componente fijo en la parte inferior -->
        <a href="/shopping"
            class="flex items-center justify-center m-2 px-3 py-2 bg-blue-600 text-white text-sm  font-semibold rounded hover:bg-blue-500 focus:outline-none focus:bg-blue-500">
            <a>Ir a mi carrito </a>
        </a>
    </div>
</div>